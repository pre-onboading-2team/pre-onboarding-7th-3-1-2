# Week 3-1. ê²€ìƒ‰ì°½ & ê²€ìƒ‰ì–´ ì¶”ì²œ ê¸°ëŠ¥ êµ¬í˜„

<br />

1. [íŒ€ ì†Œê°œ ğŸ‘«](#1-íŒ€-ì†Œê°œ-)
2. [í”„ë¡œì íŠ¸ ì†Œê°œ ğŸš€](#2-í”„ë¡œì íŠ¸-ì†Œê°œ-)
3. [ê¸°ìˆ  ìŠ¤íƒ ğŸ› ](#3-ê¸°ìˆ -ìŠ¤íƒ-)
4. [êµ¬í˜„ ê¸°ëŠ¥ ğŸ“](#4-êµ¬í˜„-ê¸°ëŠ¥-)
5. [í”„ë¡œì íŠ¸ êµ¬ì¡° ğŸ—‚](#5-í”„ë¡œì íŠ¸-êµ¬ì¡°-)
6. [Best Practice ì„ ì •ê³¼ì •ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦](#6-best-practice-ì„ ì •ê³¼ì •)
7. [í”„ë¡œì íŠ¸ ì„¤ì¹˜ ë° ì‹¤í–‰ âœ¨](#7-í”„ë¡œì íŠ¸-ì„¤ì¹˜-ë°-ì‹¤í–‰-)  

<br />



## 1. íŒ€ ì†Œê°œ ğŸ‘«

- [ì´ë¹›ë‚˜ (íŒ€ì¥)](https://github.com/bitnaleeeee)
- [ëª¨ìƒë¹ˆ](https://github.com/Topbin2)
- [ê¹€ì§„ì„](https://github.com/genuine-seok)
- [ë°•ìš°ë¹ˆ](https://github.com/Debonchocola)
- [ì´ì˜ì—°](https://github.com/strongpond)
- [ì¡°ì„±í˜¸](https://github.com/CSH111)
- [ì „ëŒ€ì›](https://github.com/eodnjs467)

<br />

## 2. í”„ë¡œì íŠ¸ ì†Œê°œ ğŸš€

- ê°œìš” : ì›í‹°ë“œ í”„ë¡ íŠ¸ì—”ë“œ í”„ë¦¬ì˜¨ë³´ë”© 7ê¸° 2íŒ€ ê³¼ì œ 3-1 ì¤‘ Best Practice
- ì£¼ì œ : ê²€ìƒ‰ì°½ & ê²€ìƒ‰ì–´ ì¶”ì²œ ê¸°ëŠ¥ êµ¬í˜„
- ê¸°ê°„ : 2022.11.8 ~ 2022.11.11

<br />


## 3. ê¸°ìˆ  ìŠ¤íƒ ğŸ› 

- Typescript
- React
- Axios
- Styled-Components

<br />

## 4. êµ¬í˜„ ê¸°ëŠ¥ ğŸ“

- êµ¬í˜„ì‚¬í•­
  - ì§ˆí™˜ëª… ê²€ìƒ‰ì‹œ API í˜¸ì¶œ í†µí•´ì„œ ê²€ìƒ‰ì–´ ì¶”ì²œ ê¸°ëŠ¥ êµ¬í˜„
    - ì‚¬ìš©ìê°€ ì…ë ¥í•œ í…ìŠ¤íŠ¸ì™€ ì¼ì¹˜í•˜ëŠ” ë¶€ë¶„ ë³¼ë“œì²˜ë¦¬
    - ê²€ìƒ‰ì–´ê°€ ì—†ì„ ì‹œ â€œê²€ìƒ‰ì–´ ì—†ìŒâ€ í‘œì¶œ
  - API í˜¸ì¶œ ìµœì í™”
    - API í˜¸ì¶œë³„ë¡œ ë¡œì»¬ ìºì‹± êµ¬í˜„ (ë¯¸êµ¬í˜„)
    - ì…ë ¥ë§ˆë‹¤ API í˜¸ì¶œí•˜ì§€ ì•Šë„ë¡ API í˜¸ì¶œ íšŸìˆ˜ë¥¼ ì¤„ì´ëŠ” ì „ëµ ìˆ˜ë¦½ ë° ì‹¤í–‰
    - í‚¤ë³´ë“œë§Œìœ¼ë¡œ ì¶”ì²œ ê²€ìƒ‰ì–´ë“¤ë¡œ ì´ë™ ê°€ëŠ¥í•˜ë„ë¡ êµ¬í˜„

<br />

## 5. í”„ë¡œì íŠ¸ êµ¬ì¡° ğŸ—‚

```bash
src
 â”£ api // ë¹„ë™ê¸° í†µì‹  ê´€ë ¨ ë¡œì§ ê´€ë¦¬
 â”£ components // ê³µìš© ì»´í¬ë„ŒíŠ¸
 â”£ constant // ìƒìˆ˜ ë³€ìˆ˜ ê´€ë¦¬
 â”£ data // ë”ë¯¸ ë°ì´í„° ê´€ë¦¬
 â”£ hooks // ì»¤ìŠ¤í…€ í›… ê´€ë¦¬
 â”£ pages // í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸
 â”£ style // ê¸€ë¡œë²Œ ìŠ¤íƒ€ì¼ ê´€ë¦¬
 â”£ types // ê³µìš© íƒ€ì… ê´€ë¦¬
 â”— utils // ê³µìš© ìœ í‹¸ í•¨ìˆ˜ ê´€ë¦¬
```

<br/>


## 6. Best Practice ì„ ì •ê³¼ì •ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦

### Debounce ì»¤ìŠ¤í…€ í›…

```tsx
// src/hooks/useDebounce.ts

import { useEffect, useState } from "react";

export const useDebounce = (value: string, delay: number) => {
  const [debouncedValue, setDebouncedValue] = useState(value);

  useEffect(() => {
    const timer = setTimeout(() => {
      setDebouncedValue(value);
    }, delay);

    return () => {
      clearTimeout(timer);
    };
  }, [value, delay]);

  return debouncedValue;
};

// src/components/SearchForm.ts

export const SearchForm = () => {
  const [value, onChange, reset] = useInput("");
  const debouncedValue = useDebounce(value, 500);
  const [{ loading, data, error }] = useSickAsync(debouncedValue, [
    debouncedValue,
  ]);

  // ...

```

- ì…ë ¥ë§ˆë‹¤ API í˜¸ì¶œí•˜ì§€ ì•Šë„ë¡ API í˜¸ì¶œ íšŸìˆ˜ë¥¼ ì¤„ì´ê¸° ìœ„í•´ Debounce í•¨ìˆ˜ ì ìš©
- ì»¤ìŠ¤í…€ í›…ìœ¼ë¡œ ë¶„ë¦¬ (useDebounce)
- ì‚¬ìš©ì ì…ë ¥ê°’ì„ Debounceëœ ê°’ìœ¼ë¡œ api ìš”ì²­(useSickAsync)

<br>

### Flux íŒ¨í„´ì„ ì ìš©í•œ ë¹„ë™ê¸° í†µì‹  ì»¤ìŠ¤í…€ í›… í™œìš©

```tsx

// src/hooks/useSickAsync.ts

import { AxiosError, AxiosResponse } from "axios";
import { DependencyList, useEffect, useReducer } from "react";

import { httpClient } from "../api/api";
import { SickServiceImp } from "../api/SickService";

export type AsyncData = AxiosResponse<any, any> | null;
export type AsyncError = AxiosError | Error | null | boolean;

export type RequestState = {
  loading: boolean;
  data: AsyncData;
  error: AsyncError;
};

export type Action =
  | { type: "LOADING" }
  | { type: "SUCCESS"; data: AsyncData }
  | { type: "ERROR"; error: AsyncError };

type Cache = Record<string, AsyncData>;

const cache: Cache = {};

function asyncReducer(state: RequestState, action: Action): RequestState {
  switch (action.type) {
    case "LOADING":
      return {
        loading: true,
        data: null,
        error: null,
      };
    case "SUCCESS":
      return {
        loading: false,
        data: action.data,
        error: null,
      };
    case "ERROR":
      return {
        loading: false,
        data: null,
        error: action.error,
      };
    default:
      throw new Error(`Unhandled action type`);
  }
}

const initialState: RequestState = {
  loading: false,
  data: null,
  error: false,
};

const sickService = new SickServiceImp(httpClient);

export const useSickAsync = (
  value: string,
  deps: DependencyList
): [RequestState, () => Promise<void>] => {
  const [state, dispatch] = useReducer(asyncReducer, initialState);
  const fetchData = async () => {
    dispatch({ type: "LOADING" });
    try {
      const data = await sickService.getSickList({ q: value });
      dispatch({ type: "SUCCESS", data });
    } catch (e: any) {
      dispatch({ type: "ERROR", error: e });
    }
  };

  useEffect(() => {
    fetchData();
  }, deps);

  return [state, fetchData];
};



// src/components/SearchForm.ts

export const SearchForm = () => {
  const [value, onChange, reset] = useInput("");
  const debouncedValue = useDebounce(value, 500);
  const [{ loading, data, error }] = useSickAsync(debouncedValue, [
    debouncedValue,
  ]);

  const items = data?.data;
  const [activeIdx, handleKeyArrow] = useKeyArrow(items || []);

  return (
    <S.SearchFormContainer>
      <S.SearchFormTitle>
        êµ­ë‚´ ëª¨ë“  ì„ìƒì‹œí—˜ ê²€ìƒ‰í•˜ê³  ì˜¨ë¼ì¸ìœ¼ë¡œ ì°¸ì—¬í•˜ê¸°
      </S.SearchFormTitle>
      <SearchInput
        value={value}
        onChange={onChange}
        reset={reset}
        onKeyDown={handleKeyArrow}
      />
      {value && (
        <S.SearchResultBlock>
          {loading && <S.SearchItemLabel>ê²€ìƒ‰ ì¤‘ ...</S.SearchItemLabel>}
          {error && <S.SearchItemError>ì—ëŸ¬ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤</S.SearchItemError>}
          {items && (
            <SearchList
              value={debouncedValue}
              items={items}
              activeIdx={activeIdx}
            />
          )}
        </S.SearchResultBlock>
      )}
    </S.SearchFormContainer>
  );
};

// 

```

- Flux íŒ¨í„´ì„ ì ìš©í•´ ë¹„ë™ê¸° í†µì‹  ìƒíƒœ ê´€ë¦¬(loading,error,success)ë¥¼ ì»¤ìŠ¤í…€ í›…ìœ¼ë¡œ ë¶„ë¦¬

<br>

### ì¼ì¹˜í•˜ëŠ” í…ìŠ¤íŠ¸ ë³¼ë“œ ì²˜ë¦¬

```tsx

// src/utils

export const divideByKeyword = (target: string, keyword: string) => {
  const preIdx = target.indexOf(keyword);
  const postIdx = preIdx + keyword.length;
  const prefix = target.slice(0, preIdx);
  const postfix = target.slice(postIdx);

  return [prefix, postfix];
};


// src/components/SearchItem.tsx

interface SearchItemProps {
  value: string;
  keyword: string;
  isActive?: boolean;
}

export const SearchItem = ({
  value,
  keyword,
  isActive = false,
}: SearchItemProps) => {
  const [prefix, postfix] = divideByKeyword(value, keyword);

  return (
    <S.SearchItemBlock isActive={isActive}>
      <S.SearchItemIcon>
        <HiOutlineSearch size="1.8rem" color="#a6afb7" />
      </S.SearchItemIcon>
      <S.SearchItemText>{prefix}</S.SearchItemText>
      <S.SearchItemMatched>{keyword}</S.SearchItemMatched>
      <S.SearchItemText>{postfix}</S.SearchItemText>
    </S.SearchItemBlock>
  );
};

```

- ê²€ìƒ‰ì–´(`keyword`)ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì „ì²´ í…ìŠ¤íŠ¸(`target`) stringì„ ë¶„ë¦¬í•˜ëŠ” ìœ í‹¸ í•¨ìˆ˜ êµ¬í˜„

<br>


## 7. í”„ë¡œì íŠ¸ ì„¤ì¹˜ ë° ì‹¤í–‰ âœ¨

<br/>

1. Git Clone

```plaintext
$ git clone https://github.com/pre-onboading-2team/pre-onboarding-7th-3-1-2.git
```

2. í”„ë¡œì íŠ¸ íŒ¨í‚¤ì§€ ì„¤ì¹˜

```plaintext
$ npm install
```

3. í”„ë¡œì íŠ¸ ì‹¤í–‰

```plaintext
$ npm start
```










